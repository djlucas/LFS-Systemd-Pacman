# Maintainer: DJ Lucas <dj_AT_linuxfromscratch_DOT_org>

pkgname=linux-api-headers
pkgver=5.8.2
pkgrel=1
pkgdesc="The Linux API Headers expose the kernel's API for use by Glibc."
arch=('i686' 'x86_64')
url="http://www.kernel.org/"
groups=('core')
license=('GPL')
makedepends=('bash'
             'coreutils'
             'diffutils'
             'findutils'
             'glibc'
             'grep'
             'gzip'
             'kmod'
             'make'
             'ncurses'
             'perl'
             'sed')
depends=('rootfs')
source=("https://www.kernel.org/pub/linux/kernel/v5.x/linux-${pkgver}.tar.xz")
options=('!debug' '!strip' 'emptydirs')

build(){
  cd ${srcdir}/linux-${pkgver}
  make mrproper
  make headers
  find usr/include -name '.*' -delete
  rm usr/include/Makefile
}

package(){
  install -vdm755 ${pkgdir}/usr
  cd ${srcdir}/linux-${pkgver}
  cp -rv usr/include ${pkgdir}/usr
}

sha256sums=('dc9432f97f08b6a0e5f5e0aaf56025c37094acc343f42f65b2919e66f3acb2a1')
