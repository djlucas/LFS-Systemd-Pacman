# Maintainer: DJ Lucas <dj_AT_linuxfromscratch_DOT_org>

pkgname=bc
pkgver=3.1.5
pkgrel=1
pkgdesc="The Bc package contains an arbitrary precision numeric processing language."
arch=('x86_64')
url="https://git.yzena.com/gavin/bc"
license=('GPL')
groups=('core')
makedepends=('bash'
             'binutils'
             'bison'
             'coreutils'
             'gcc'
             'glibc'
             'grep'
             'make'
             'patch')
depends=('readline')
checkdepends=('gawk')
source=("https://github.com/gavinhoward/${pkgname}/releases/download/${pkgver}/${pkgname}-${pkgver}.tar.xz")

build(){
  cd "${pkgname}-${pkgver}"
  CFLAGS=$(echo $CFLAGS | sed 's@-O[0-9,s]@@')
  echo $CFLAGS
  prefix=/usr CC=gcc CFLAGS+=" -std=c99" ./configure.sh -G -O3
  make
}

check(){
  cd "${pkgname}-${pkgver}"
  make test
}

package(){
  cd "${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}

sha256sums=('0493c1eb76e94ace7a00532824121ab901ac1bd3580a340ea5de92a7d9c1a19e')
